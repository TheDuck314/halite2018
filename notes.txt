NOTES ON COMBAT
- Rachol probably prefers to ram high-halite ships with low-halite ships, which does sound good

I think I really could benefit from
 - prefer to choose mining locations near good dropoffs
 - anticipate dropoff construction and rally there even before it's built. need to be careful that the halite to construct it actually gets delivered to the shipyard though

maybe need some repulsion in mining targets

dropoff distance penalty may be too heavy handed. or not heavy handed enough! tune it.

need some hysteresis in dropoff location choice

in addition to not building so far away, we also need to not be so scared of recent enemy dropoffs
https://halite.io/play/?game_id=1166131&replay_class=1&replay_name=replay-20181030-074422%2B0000-1540884547-64-64-1166131

in 2p there's probably a lot of value in grouping -- at least, our low-halite ships
should be attracted to wherever the action is

WAIT-- are my returners gonna casually ram enemies I designate as "passable"?? that seems pretty wrong

consider tuning the parameter of when to stop making ships

consider tuning the min nearby halite to make a dropoff / min dist between dropoffs

min dist between dropoffs should logically be a function of halite density at the new dropoff
higher halite density justifes closer-spaced dropoffs (especially on smaller maps?)

lategame 4p ramming could be op, if you only do it when you're the only one nearby

in 4p, at the end, we can ram empty ships into whichever player is closest ahead of us (or closest behind us if we're winning)

I'm probably not building enough dropoffs on big 2p maps with a lot of halite

flee toward base, not allies?

don't ram when you don't have enough spare capacity nearby to pick up the halite?

we still don't actually flee onto impasable squares

try making the planning priority queue just a regular queue.

I think I might be building too many ships on 2p maps, specifically when there's not much halite left

maybe the advance dropoffs are bad because they're very far from the turtles and they have to 
spend tons of time getting there. that suggests there should be benefits from:
 - anticipating the dropoff location and preferring to mine near there
 - preferring to build the dropoffs closer to base, and closer to our ships

vvvvvvvvvvvvv DO THIS ONE vvvvvvvvvvvvvvvvvv
- when choosing mining target ships should take into account expected mining rate of *next* trip.
  that is, consider returning to all possible dropoffs, and consider the return time & expected next-trip mining rate,
  calculate an overall mining rate for each possible return, and max over them.
^^^^^^^^^^^^^ DO THIS ONE ^^^^^^^^^^^^^^^^^^

- think about whether our "halite rate" mining target selection is quite correct.
  it's neglecting the benefit of getting our already-held halite back to base earlier
  the benefit of that increases with the amount of halite we have (and with the usefulness of spawning new ships)
  so maybe there's room for a term that pushes for targets closer to base when we have lots of halite, and when we are still spawning ships (and is even higher early in the game?)
  would be sweet if we could figure out how to estimate numerically the time value of halite, whatever that means

- we could have the threshold for returning be lower when you're closer to base, since the time cost is lower

- we have a stupid thing where we choose a mining target that we don't know how to path to so we stay still

- returners shouldn't force miners to evade if they have a free path.

Rachol pre-sends his miners to where he knows he is going to build his dropoff.
I can do this too but I'd need to make sure I don't decide to place the dropoff somewhere else.
Also he doesn't just send his returning miners.

EASY THING TO TRY: ramming in 4p under strict conditions (late game, no one will steal the loot)


try the thing where we do a few iterations of mining target replanning with some repulsion
between the mining targets

we may want to send ships back at like 500 halite in the late game to reduce the risk of getting rammed with a full load

could hunt in packs!

if the ally currently mining a square is going to fill up before exhausting it, we could consider
it valid to have a second guy choose it as a mining target, using a lowered halite score

think more about preferring to mine near enemies in 4p games, even when there isn't instantaneous inspiration. there's an NAP-like idea here






